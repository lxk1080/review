<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hash_b</title>
</head>
<body>

<div class="text">123</div>

<script>
    let text = document.querySelector('.text')
    // 接收数据
    window.onhashchange = function () {
        text.innerHTML = window.location.hash.substr(1)

        // 发送数据
        try {
            window.parent.location.hash = '当我们眺望远方的时候，近处的风景便看不清了'
        } catch(e) {
            // 部分浏览器的安全机制无法修改parent.location.hash
            let ifr = document.createElement('iframe')
            ifr.style.display = 'none'
            ifr.src = './hash_proxy.html'
            let res = document.body.appendChild(ifr)
            setTimeout(() => {
                ifr.src = './hash_proxy.html#当我们眺望远方的时候，近处的风景便看不清了'
            }, 60)
        }
    }
</script>

</body>
</html>