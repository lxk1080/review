## Project Design

### 已有的项目设计

### 可能的项目设计

1. 设计一个前端统计 SDK
   - [参考演示链接](https://coding.imooc.com/lesson/562.html#mid=51083)
   - 基本要素：pv、自定义事件、性能统计、错误监控、发送数据
   - 涉及到的技术点：
     - 性能监控使用浏览器 `performance.timing` API
     - 错误监控使用 `onerror` 事件，Promise 的 catch 未捕获错误，使用 `unhandledrejection` 事件
       - 如果是 Vue 或 React，还需要配合各自的错误监控 API
         - Vue 的 `errorCaptured` 生命周期和 `errorHandler` 全局配置
         - React 的 `ErrorBoundary` 组件
     - 发送数据使用 `<img/>` 标签发送，可跨域
     - 关于错误监控，这里补充一下，一般需要用到 source-map 文件，这个一般在 webpack 或其它工程工具配置就可以
       - 但是有个问题就是，如果不是开源项目，一般来讲，source-map 文件是不应该被请求到的（浏览器上没有），那这时如果线上报错，我们就无法获得报错源代码的位置
       - 我们只能得到报错的信息，这个时候就需要把 source-map 文件放在服务器，然后把报错信息传给服务器，让服务器配合 source-map 找到报错具体位置


2. SPA 和 MPA 该如何选择？
   - SPA 页面
     - 特点
       - 功能较多，一个页面展示不完（需要共享数据）
       - 以操作为主，非展示为主
       - 适合一个综合 Web 应用
     - 场景
       - 大型后台管理系统
       - 比较复杂的 WebApp，如外卖 H5
   - MPA 页面
     - 特点
       - 功能较少，一个页面展示的完（各页面不需要共享数据）
       - 以展示为主，操作较少
       - 适合孤立页面
     - 场景
       - 分享页，如腾讯文档分享出去
       - 新闻详情页，微信公众号发布的页面
   - 虽然说 MPA 页面能做的，SPA 也可以，但是处于对性能的考虑，还是有些区别的
     - 就例如 MPA 的分享页面，html 里面只需要引入对应的 js 文件即可，功能非常单一纯粹
     - 但如果是 SPA 页面，这个 html 是需要兼容所有页面功能的（当然这里面也可以拆分为很多其它的小 js 文件，但是效果肯定没 MPA 好，没有 MPA 纯粹）


3. 设计一个 H5 编辑器的数据模型和核心功能
   - [参考演示链接](https://coding.imooc.com/lesson/562.html#mid=51088)
   - 几个核心要点：
     - 页面中的组件用数组存储（有序），样式属性或事件可以汇集到一个 style、events 里面
     - 给页面数据添加一个核心字段：当前激活的组件 ID，用于共享数据
     - 图层不要单独搞数据，而是从页面数据 computed 而来，图层只是个缩影，一切数据的改变都应该在页面数据中进行
   - 系统的数据结构设计至关重要，比优化算法更重要
   - **要看整体设计，抓核心问题，而非纠细节**
     - 如果你纠结这个代码每一步怎么写出来，那恐怕是想不太明白
     - 不要纠细节，重要的是，搞清楚问题的核心点


4. 设计一个 “用户-角色-权限” 的模型和功能
   - [参考链接演示](https://coding.imooc.com/lesson/562.html#mid=51089)
   - 就是 RBAC 模型 - Role-Based access control，基于角色的访问控制
     - 总共五张表
       - 用户表
       - 角色表
       - 权限表
       - 用户-角色关联表
       - 角色-权限关联表
     - 用户管理：增删改查（用户表），绑定角色（用户-角色关联表）
     - 角色管理：增删改查（角色表），绑定权限（角色-权限关联表）
     - 权限管理：增删改查（权限表）
     - 对于前端而言，可以用数组或 Set、Map 来管理这些数据


5. 开发一个 H5 抽奖页，可能需要后端提供哪些接口？
   - 这个题咋说呢，可能主要是想说，拿到一个需求后，我们心里需要演示一下它的业务流程（但一般情况下，这些过程都应该被写在产品原型里）
     - 之前在平安工作时，这种抽奖、领红包、薅羊毛活动多的很
   - 接下来说说看：
     - 登录接口（抽奖，总要有个人来抽吧，得先弄清楚是谁，进入页面检查登录状态）
     - 是否抽过奖接口（抽过了按钮变灰，没抽过才去抽，具体看业务，有可能支持抽多次）
     - 抽奖接口（抽奖的操作肯定不能放在前端，需要后端执行，并返回结果）
     - 主要就是以上三个，但实际业务可能有所扩展，根据经验来看，可能还有：
       - 引导去分享（可能需要好友接口）
       - 页面埋点（发送页面统计数据的接口）
         - PV 多少，有几个人点了抽奖按钮，又有几个人点了分享
   - 最后，人生建议：**技术一定要去熟悉业务，因为技术永远是为业务服务的**
     - 牢记这句话，可以保你永远不会出现在公司的裁员名单里（除非你的技术能力过差。。）
     - 不要觉得自己可以专攻技术，业务无所谓，当然，如果你的技术过硬的话另说
