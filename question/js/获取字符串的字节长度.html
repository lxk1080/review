<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!--<meta name="viewport" -->
        <!--content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">-->
  <title>Test</title>
</head>
<body>
<script>

  function getLen(str) {
      let num = 0
      for (let i = 0; i < str.length; i++) {
          let charCode = str.charCodeAt(i)
          if (charCode >= 0 && charCode <= 128) {
              num++
          } else {
              num += 2
          }
      }
      return num
  }

  function getLen2(str) {
      return str.replace(/[^\x00-\xff]/g, 'aa').length
  }

  console.log(getLen('东方'))
  console.log(getLen2('东方'))

</script>
</body>
</html>